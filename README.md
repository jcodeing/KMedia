README!!ğŸ˜´ OR-> Read The Fucking ğŸ‘¨â€ğŸ’»â€Source Code //â˜€ï¸ ğŸŒ§ âš¡ï¸ ğŸŒª ğŸŒ« â„ï¸...

[download_demo_apk]: https://raw.githubusercontent.com/jcodeing/KMedia/release/demo/demo_release.apk  "Click Download KMedia Demo 4.9 MB"

[![KMedia-Logo](/readme/icon/kmedia_logo.svg)][download_demo_apk]

ä¸€ä¸ªä¸ºAndroidæ‰“é€ çš„åº”ç”¨çº§åª’ä½“æ¡†æ¶, å®ƒå¯ä»¥åŠ©ä½ å¿«é€Ÿæ­å»ºåª’ä½“åº”ç”¨.
å†…éƒ¨é‡æ–°å®šä¹‰Android MediaPlayer APIå¹¶å¯¹å…¶å°è£…, ç®€åŒ–å’Œæ‰©å±•ä¸€äº›åŸç”ŸAPIä¸æ”¯æŒçš„åŠŸèƒ½.
å…¶ä¸­æ¶µç›–äº†, `ABæ’­æ”¾/å¾ªç¯` `ä½ç½®å•å…ƒ/é—´éš”/å¾ªç¯` `å˜é€Ÿæ’­æ”¾` `åª’ä½“é˜Ÿåˆ—ç®¡ç†` `åª’ä½“æœåŠ¡/ç»‘å®š` `éŸ³é¢‘åå°/é€šçŸ¥æ æ§åˆ¶`
`åª’ä½“æŒ‰é”®è‡ªå®šä¹‰å¤„ç†` `éŸ³é¢‘ç„¦ç‚¹ç®¡ç†` `åª’ä½“å¼•æ“åˆ‡æ¢/æ‰©å±•`... ç­‰åŠŸèƒ½çš„å¿«é€Ÿå®ç°.
ä»¥åŠ, å¯¹è§†é¢‘æ’­æ”¾å®ç°æ–¹é¢çš„å°è£…. å…¶ä¸­å°†è§†é¢‘è§†å›¾ä¸»è¦åˆ†ä¸º: ç»˜åˆ¶å±‚ æ§åˆ¶ç»„ æ§åˆ¶å±‚, ä¸‰ä¸ªéƒ¨åˆ†.
ä»è€Œèƒ½å¤Ÿå¿«é€Ÿå¹¶çµæ´»çš„å®ç°Videoç›¸å…³åº”ç”¨çš„å¤§éƒ¨åˆ†åŠŸèƒ½, åŒ…æ‹¬ `è§†é¢‘æµ®çª—/æ‹–åŠ¨/è°ƒæ•´ä½ç½®å¤§å°` `æ¨ªç«–å±è‡ªåŠ¨åˆ‡æ¢` `å…¨å±é”å®š`
`æ‰‹åŠ¿è°ƒæ•´äº®åº¦/éŸ³é‡/è¿›åº¦` `å­—å¹•/åˆ‡æ¢/æ‹–åŠ¨` `è§†é¢‘æ®µè½/é—´éš”å¤è¯»` `è§†é¢‘ç»­é›†/åˆ—è¡¨/å¾ªç¯æ’­æ”¾` `åŠ¨æ€åˆ‡æ¢è§†é¢‘æ§åˆ¶å±‚`
`æ§åˆ¶å±‚åˆ†ç¦»`... ç­‰åŠŸèƒ½çš„å¿«é€Ÿå®ç°.

## ä½¿ç”¨
KMediaæ¡†æ¶å¯ä»¥ç›´æ¥ä»JCenteræ·»åŠ ä¾èµ–, æˆ–è€…ä»¥å­æ¨¡å—çš„å½¢å¼æ·»åŠ åˆ°å·¥ç¨‹åå†ä¾èµ–.

### ä»JCenteræ·»åŠ ä¾èµ– `å¿«æ·æ–¹ä¾¿`
[![KMedia-Core](/readme/icon/kmedia_core_release.svg)](https://bintray.com/jcodeing/kmedia/kmedia-core/_latestVersion) [![KMedia-Uie](/readme/icon/kmedia_uie_release.svg)](https://bintray.com/jcodeing/kmedia/kmedia-uie/_latestVersion) [![KMedia-Exo](/readme/icon/kmedia_exo_release.svg)](https://bintray.com/jcodeing/kmedia/kmedia-exo/_latestVersion)
```gradle
compile 'com.jcodeing:kmedia-core:r1.0.10' //KMediaæ ¸å¿ƒæ¨¡å—
compile 'com.jcodeing:kmedia-uie:r1.0.10' //KMediaç•Œé¢æ‰©å±•æ¨¡å— (å¯é€‰)
compile 'com.jcodeing:kmedia-exo:r1.0.10' //KMediaåª’ä½“å¼•æ“æ‰©å±•æ¨¡å— (å¯é€‰)
```

### æ·»åŠ Submoduleåˆ°å·¥ç¨‹åå†ä¾èµ– `è‡ªå®šä¹‰å¼º`
[![KMedia-Core-Fork](/readme/icon/kmedia_core_fork.svg)](https://github.com/jcodeing/KMedia-Core/fork) [![KMedia-Uie-Fork](/readme/icon/kmedia_uie_fork.svg)](https://github.com/jcodeing/KMedia-Uie/fork) [![KMedia-Exo-Fork](/readme/icon/kmedia_exo_fork.svg)](https://github.com/jcodeing/KMedia-Mpe/fork)

#### Step 1: Fork(â†‘)æ¨¡å—ä»“åº“åˆ°ä½ çš„Github.
å½“ç„¶, ä½ ä¹Ÿå¯ä»¥Forkæˆ‘çš„ä»“åº“åˆ°ä½ çš„ç§äººremoteä»“åº“.  
è¿™æ­¥ä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä¸€ä¸ªremoteä»“åº“åœ°å€.

#### Step 2: åœ¨ä½ å·¥ç¨‹çš„æ ¹ç›®å½•, ç”¨ `git submodule` å‘½ä»¤æ·»åŠ å­æ¨¡å—.
```sh
git submodule add "Your KMedia-Core Remote Repositorie Path" kmedia-core
git submodule add "Your KMedia-Uie Remote Repositorie Path" kmedia-uie
git submodule add "Your KMedia-Mpe Remote Repositorie Path" kmedia-mpe
```

#### Step 3: æ ¹æ®ä¸Šé¢æ‰€æ·»åŠ çš„å­æ¨¡å—é…ç½®ä½ å·¥ç¨‹çš„ `settings.gradle` æ–‡ä»¶.
```gradle
include ':kmedia-core'
include ':kmedia-uie'
include ':kmedia-exo'
project(':kmedia-exo').projectDir = new File(settingsDir, 'kmedia-mpe/exo')
```

#### Step 4: ç»è¿‡ä¸Šé¢çš„æ·»åŠ é…ç½®æ­¥éª¤å, ä½ å°±å¯ä»¥åœ¨æœ¬åœ°ä¾èµ–å¹¶éšæ—¶å¼€å‘è‡ªå®šä¹‰KMediaçš„å„ä¸ªæ¨¡å—.
```gradle
compile project(':kmedia-core')
compile project(':kmedia-uie')
compile project(':kmedia-exo')
```

## æ¼”ç¤º
[![Demo-Screen-Record-1](https://raw.githubusercontent.com/jcodeing/KMedia/release/demo/demo_sr_1.gif)][download_demo_apk][![Demo-Ui](https://raw.githubusercontent.com/jcodeing/KMedia/release/demo/demo_ui.gif)][download_demo_apk][![Demo-Screen-Record-2](https://raw.githubusercontent.com/jcodeing/KMedia/release/demo/demo_sr_2.gif)][download_demo_apk]  
[===============================ç‚¹å‡»ä¸‹è½½ KMedia Demo 4.9 MB===============================][download_demo_apk]
```
k, 2017-9-24, PrivateKeyEntry,
è¯ä¹¦æŒ‡çº¹ (SHA1): 43:79:8C:03:1A:8A:2A:E8:CC:CA:D4:E3:63:9A:0F:70:29:C4:69:9B
```
### Example 1: ç®€å•çš„è§†é¢‘æ’­æ”¾
é¦–å…ˆåœ¨Layoutä¸­æ·»åŠ PlayerView.
```xml
<com.jcodeing.kmedia.video.PlayerView
   android:id="@id/k_player_view"
   android:layout_width="match_parent"
   android:layout_height="200dp"/>
```
ç„¶ååœ¨Activityä¸­å°†Playerè®¾ç½®ç»™PlayerViewå³å¯å»æ’­æ”¾.
```java
Player player = new Player(context).init(new AndroidMediaPlayer());
((PlayerView) findViewById(R.id.k_player_view)).setPlayer(player);
player.play(Uri.parse("video"));
```
æœ€åå½“ä½ ç¡®å®šä¸å†æ’­æ”¾æ—¶, è¯·è°ƒç”¨ä»¥ä¸‹æ–¹æ³•å»é‡Šæ”¾èµ„æºå¯¹è±¡.
```java
playerView.finish();
player.shutdown();
```

### Example 2: ç®€å•çš„è§†é¢‘æµ®çª—
æŠŠPlayeräº¤ç»™VideoFloatingWindowControllerå»æ˜¾ç¤ºå³å¯æµ®å±æ’­æ”¾.
```java
Player player = new Player(context).init(new ExoMediaPlayer(context));
new VideoFloatingWindowController(getApplicationContext()).show(player);
layer.play(Uri.parse("video"));
```
æœ€åå½“ä½ ç¡®å®šä¸å†æ’­æ”¾æ—¶, è¯·è°ƒç”¨ä»¥ä¸‹æ–¹æ³•å»é‡Šæ”¾èµ„æºå¯¹è±¡.
```java
player.shutdown();
vFloatingWinControler.hide();
```
æ¸©é¦¨æç¤º,è¯·æ ¹æ®ä½ çš„å…·ä½“ä½¿ç”¨éœ€æ±‚åˆç†ç”³è¯·WINDOWæƒé™. [ç‚¹å‡»æŸ¥çœ‹æºç ç‰‡æ®µ](https://github.com/jcodeing/KMedia-Core/blob/release/src/main/java/com/jcodeing/kmedia/window/FloatingWindowController.java#L127-L135)
```java
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT || OS.i().isMIUI()) {
  //<!--Using WindowManager.LayoutParams.TYPE_PHONE For Floatingã€€Windowã€€View-->
  //<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
  layoutParams.type = WindowManager.LayoutParams.TYPE_PHONE;//2002
} else {
  layoutParams.type = WindowManager.LayoutParams.TYPE_TOAST;//2005
}
```

### Example 3: ç®€å•çš„è§†é¢‘å…¨å±
é¦–å…ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­, æ·»åŠ configChanges åˆ°ä½ çš„Activity.
```xml
<activity
  android:configChanges="orientation|keyboardHidden|screenLayout|screenSize"
</activity>
```
ç„¶ååœ¨Activityä¸­è¦†å†™onConfigurationChanged, å¹¶åœ¨æ–¹æ³•å†…å¤„ç†æ¨ªç«–å±åˆ‡æ¢æ—¶éœ€è¦éšè—å’Œæ˜¾ç¤ºçš„View.
```java
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  //Dispose view in control layer switch
  if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    other.setVisibility(View.GONE);
  } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
    other.setVisibility(View.VISIBLE);
  }
}
```
æœ€åè°ƒç”¨playerViewå¯ç”¨æ–¹å‘åŠ©æ‰‹å³å¯å®ç°ç®€å•çš„æ¨ªç«–å±è‡ªåŠ¨åˆ‡æ¢.
```java
playerView.setOrientationHelper(this, 1);//enable sensor
```

### Example 4: ç®€å•çš„ä½¿ç”¨æ§åˆ¶å±‚
ControlLayerViewåœ¨Layoutä¸­çš„ç®€å•ä½¿ç”¨.
```xml
<com.jcodeing.kmedia.video.PlayerView
  android:id="@id/k_player_view"
  android:layout_width="match_parent"
  android:layout_height="200dp">
  <!--app:use_gesture_detector="true"-->
  <!--å¯ä»¥å¼€å¯ç®€å•çš„æ‰‹åŠ¿,ä¸Šä¸‹æ»‘åŠ¨è°ƒæ•´éŸ³é‡,å·¦å³æ»‘åŠ¨è°ƒæ•´è¿›åº¦,åŒå‡»æ’­æ”¾/æš‚åœç­‰-->
  <com.jcodeing.kmedia.video.ControlLayerView
    android:id="@id/k_ctrl_layer_port"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:use_part_top="true">
    <!--ä½¿ç”¨KID @id/k_ctrl_layer_port å¯ä»¥æ ‡è¯†ä¸ºç«–å±ä¸‹çš„é»˜è®¤æ§åˆ¶å±‚-->
    <!--ä½¿ç”¨KID @id/k_ctrl_layer_land å¯ä»¥æ ‡è¯†ä¸ºæ¨ªå±ä¸‹çš„é»˜è®¤æ§åˆ¶å±‚-->

    <!--app:interaction_area_always_visible="true"-->
    <!--å¯ä»¥ä½¿å„ä¸ªPartéƒ¨åˆ†ä¸€ç›´ä¸ºæ˜¾ç¤ºçŠ¶æ€,ä¸ä¼šåœ¨è¶…æ—¶ç­‰æƒ…å†µä¸‹è‡ªåŠ¨éšè— -->

    <!--app:part_top_min_height="17dp"-->
    <!--è¯¥å±æ€§å¯ä»¥ç›´æ¥è®¾ç½®é¡¶éƒ¨Partçš„æœ€å°é«˜åº¦,å¦å¤–ç›¸å¯¹åº”çš„è¿˜æœ‰_bottom -->

    <!--View frame explain:
      |************************|
      |          top           |
      |                        |
      |                        |
      | left    middle   right |
      |                        |
      |                        |
      |         bottom         |
      |************************|-->
     <!--å…¶ä¸­bottom,middleéƒ½ä¸ºé»˜è®¤ä½¿ç”¨-->
     <!--æƒ³ç”¨å…¶ä»–Partè¯·è®¾ç½®app:use_part_xxx="true"-->

     <!--ä½¿ç”¨ KID æ ‡è¯†ä½ è¦æ·»åŠ çš„å„ä¸ªPart-->
     <!--=========@Top@=========-->
     <!--android:id="@id/k_ctrl_layer_part_top"-->
     <!--=========@Bottom@=========-->
     <!--android:id="@id/k_ctrl_layer_part_bottom"-->
     <!--=========@Xxx@=========-->
     <!--android:id="@id/k_ctrl_layer_part_Xxx"-->
     <XxxxLayout
       android:id="@id/k_ctrl_layer_part_Xxx"
       android:layout_width="match_parent"
       android:layout_height="match_parent">
       <!--XxxxLayoutä½ å¯ä»¥éšæ„æ›¿æ¢ä¸ºFrameLayout,RelativeLayoutç­‰-->
       <!--å†…éƒ¨ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²æ·»åŠ ä½ è¦çš„View-->
       <!--å…¶ä¸­å¯ä»¥ä½¿ç”¨ä¸€äº›å…¬å…±çš„Idæ¥å¿«é€Ÿå®Œæˆä¸åŒçš„éœ€æ±‚-->

       <!--ä½¿ç”¨KID @id/k_play å’Œ @id/k_pause-->
       <!--å†…éƒ¨ä¼šè‡ªåŠ¨å¸®ä½ å®Œæˆè§†é¢‘æ’­æ”¾è¿‡ç¨‹ä¸­,æ’­æ”¾/æš‚åœæ§åˆ¶æŒ‰é’®çš„å„ä¸ªå“åº”-->

       <!--ä½¿ç”¨KID @id/k_position_tv å’Œ @id/k_duration_tv-->
       <!--å†…éƒ¨ä¼šè‡ªåŠ¨æŒ‰ç…§ä½ çš„æ ‡è¯†,å»æ˜¾ç¤ºæ’­æ”¾è¿›åº¦å’Œæ€»æ—¶é•¿-->

       <!--ä½¿ç”¨KID @id/k_progress_any å’Œ @id/k_progress_bar-->
       <!--å†…éƒ¨ä¼šå¸®ä½ å¤„ç†,æ’­æ”¾è¿›å±• ä¸¤ä¸ªidå¯ä»¥ä¸€èµ·ä½¿ç”¨-->
       <!--å…¶ä¸­k_progress_anyå¯ä»¥ä¸ºä½ è‡ªå®šçš„ä»»ä½•Viewåªè¦å®ç°ProgressAnyè¿™ä¸ªæ¥å£-->

       <!--Tips: è¿™äº› KID ä¸å±€é™äºPartå†…éƒ¨ä½¿ç”¨,åªè¦åœ¨æ§åˆ¶å±‚å†…éƒ½å¯ä»¥-->
     </XxxxLayout>
     <!--æ³¨æ„: ä¸Šé¢æåˆ°çš„Top,Bottom,Xxxè¿™äº›æ–¹ä½Partçš„layout_xxå±æ€§
      éƒ½æ˜¯ç›¸å¯¹äºå†…éƒ¨æ–¹ä½å®¹å™¨çš„, å®ƒä»¬åœ¨æ§åˆ¶å±‚å†…çš„ä½ç½®æ˜¯å›ºå®šçš„-->
     <!--æ³¨æ„: ä¸‹é¢è¿™ä¸¤ä¸ªPartçš„layout_xxå±æ€§æ˜¯ç›¸å¯¹äºè¿™ä¸ªæ§åˆ¶å±‚çš„-->
     <!--=========@Buffer@=========-->
     <!--android:id="@id/k_ctrl_layer_part_buffer"-->
     <!--ç”¨äºå¿«é€Ÿæ ‡è¯†è¯¥Viewä¸ºæ’­æ”¾ä¸­è§†é¢‘ç¼“å†²æ—¶æ˜¾ç¤º-->
     <!--=========@Tips@=========-->
     <!--android:id="@id/k_ctrl_layer_part_tips_tv"-->
     <!--è¿™ä¸ªTextViewç”¨äºå†…éƒ¨å°æç¤º,æ¯”å¦‚æ‰‹åŠ¿æ”¹å˜éŸ³é‡ç­‰-->
  </com.jcodeing.kmedia.video.ControlLayerView>
</com.jcodeing.kmedia.video.PlayerView>
```
ControlLayerViewåœ¨Activityä¸­çš„ç®€å•ä½¿ç”¨. [ç‚¹å‡»æŸ¥çœ‹æºç ç‰‡æ®µ](/demo/src/main/java/com/jcodeing/kmedia/demo/VideoQueueActivity.java#L72-L114)
```java
// ============================@ControlLaye@============================
// æ ¹æ®è‡ªå·±æ·»åŠ çš„æ§åˆ¶å±‚id,findåˆ°æ§åˆ¶å±‚View. ä¸‹é¢ç®€å•ç”¨æ§åˆ¶å±‚KID @id/k_ctrl_layer_port æ¥æ¼”ç¤º
ControlLayerView portCtrlLayer = (ControlLayerView) findViewById(R.id.k_ctrl_layer_port);
// åœ¨initPartæ—¶,æ³¨æ„ç¡®ä¿è¿™ä¸ªPartåœ¨Layoutä¸­ å·²ç» app:use_part_xxx="true" (é»˜è®¤Partå°±ä¸ç”¨å†è®¾ç½®äº†)

// Use top title
portTitle = (TextView) portCtrlLayer.initPart(R.id.part_top_tv);
// è‡ªå·±å¤„ç†Title, å¦‚æœä½¿ç”¨äº†MediaQueueåˆ™å¯ä»¥åœ¨onCurrentQueueIndexUpdated(.)å›è°ƒç”¨æ›´æ–°ä½ çš„Title

//Custom top left iv
portCtrlLayer.initPartIb(R.id.part_top_left_ib,
    R.drawable.ic_go_back, "goBack").setOnClickListener(this);
//Custom bottom right iv
portCtrlLayer.initPartIb(R.id.part_bottom_right_ib,
    R.drawable.ic_go_full_screen, "goFullScreen").setOnClickListener(this);
// è‡ªå·±å¤„ç†ä¸åŒPartæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
// å…¶ä¸­goFullScreen Apiè°ƒç”¨: playerView.getOrientationHelper().goLandscape();

//Custom remove position
portCtrlLayer.removePart(R.id.k_position_tv);
//Custom change bottom background
portCtrlLayer.findPart(R.id.k_ctrl_layer_part_bottom)
    .setBackgroundResource(android.R.color.transparent);
//Custom change middle background
portCtrlLayer.findPart(R.id.k_ctrl_layer_part_middle)
    .setBackgroundResource(android.R.color.transparent);
//Custom change middle play/pause/buffer/... size
((ImageButton) portCtrlLayer.findPart(R.id.k_play,
    Metrics.dp2px(this, 31f), Metrics.dp2px(this, 31f))).setScaleType(ScaleType.FIT_CENTER);
//æœ€åå¦‚æœä¸Šé¢çš„æ”¹åŠ¨ä¸­,æ¶‰åŠåˆ°SmartView(k_play/pause..) éœ€è¦å»æ›´æ–°ä¸‹
portCtrlLayer.updateSmartView();
```

### Example 5: ç®€å•çš„ä½¿ç”¨PlayerService/Binding
é¦–å…ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­, æ·»åŠ service.
```xml
<service android:name="com.jcodeing.kmedia.service.PlayerService"/>
```
ç„¶ååœ¨Activityä¸­è¿›è¡ŒPlayerBinding. [ç‚¹å‡»æŸ¥çœ‹æºç ç‰‡æ®µ](/demo/src/main/java/com/jcodeing/kmedia/demo/AudioQueueActivity.java#L91-L125)
```java
player = new PlayerBinding(this, PlayerService.class, new BindPlayer() {
  @Override
  public IPlayer onBindPlayer() {
    return new Player(getApplicationContext())
        .init(new ExoMediaPlayer(getApplicationContext()));
  }//Player service bind player, call back.(if is bound, not call back)
}, new BindingListener() {
  @Override
  public void onFirstBinding(PlayerService service) {
    //do something player service init operation.
    //å¯ä»¥åœ¨è¿™é‡Œç»™æœåŠ¡è®¾ç½®ä¸€ä¸ªNotifier,æ¥å®ç°åœ¨é€šçŸ¥æ ä¸­æ§åˆ¶éŸ³é¢‘æ’­æ”¾
    service.setNotifier(new AudioQueueNotifier());
  }//First binding call back.(if first binding finish, not call back)

  @Override
  public void onBindingFinish() {
    player.xxx();
  }//Binding finish. Can play.
});
}
```

### Example X: æ›´å¤šä¾‹å­å‚è€ƒ

#### [MainActivity](/demo/src/main/java/com/jcodeing/kmedia/demo/MainActivity.java)
* [activity_main](/demo/src/main/res/layout/activity_main.xml) & [ctrl_layer_custom_main](/demo/src/main/res/layout/ctrl_layer_custom_main.xml)  
* [MainPortCtrlLayer](/demo/src/main/java/com/jcodeing/kmedia/demo/MainPortCtrlLayer.java) & [ctrl_layer_port_main](/demo/src/main/res/layout/ctrl_layer_port_main.xml)  
* [MainLandCtrlLayer](/demo/src/main/java/com/jcodeing/kmedia/demo/MainLandCtrlLayer.java) & [ctrl_layer_land_main](/demo/src/main/res/layout/ctrl_layer_land_main.xml)  
* [MainVFloatingView](/demo/src/main/java/com/jcodeing/kmedia/demo/MainVFloatingView.java) & [floating_video_view_main](/demo/src/main/res/layout/floating_video_view_main.xml)

#### [AudioQueueActivity](/demo/src/main/java/com/jcodeing/kmedia/demo/AudioQueueActivity.java)
* [activity_queue_audio](/demo/src/main/res/layout/activity_queue_audio.xml) & [item_audio_queue](/demo/src/main/res/layout/item_audio_queue.xml)  
* [AudioQueueNotifier](/demo/src/main/java/com/jcodeing/kmedia/demo/AudioQueueNotifier.java)

#### [VideoQueueActivity](/demo/src/main/java/com/jcodeing/kmedia/demo/VideoQueueActivity.java)
* [activity_queue_video](/demo/src/main/res/layout/activity_queue_video.xml) & [item_video_queue_port](/demo/src/main/res/layout/item_video_queue_port.xml)  
* [VideoQueueLandCtrlLayer](/demo/src/main/java/com/jcodeing/kmedia/demo/VideoQueueLandCtrlLayer.java) & [ctrl_layer_land_queue](/demo/src/main/res/layout/ctrl_layer_land_queue.xml) &  [item_video_queue_land](/demo/src/main/res/layout/item_video_queue_land.xml)

#### [VideoMultipleActivity](/demo/src/main/java/com/jcodeing/kmedia/demo/VideoMultipleActivity.java)
* [activity_multiple_video](/demo/src/main/res/layout/activity_multiple_video.xml)  
* [VideoMultipleFloatingView](/demo/src/main/java/com/jcodeing/kmedia/demo/VideoMultipleFloatingView.java) & [floating_video_view_multiple](/demo/src/main/res/layout/floating_video_view_multiple.xml)


## æ–‡æ¡£
* The [KMedia-Core](https://jcodeing.github.io/KMedia-Core) JavaDoc
* The [KMedia-Uie](https://jcodeing.github.io/KMedia-Uie) JavaDoc

### [API - IPlayer](https://github.com/jcodeing/KMedia-Core/blob/release/src/main/java/com/jcodeing/kmedia/IPlayer.java)
#### Video
```java
void setVideo(SurfaceView surfaceView);
void setVideo(TextureView textureView);
void clearVideo();
```
#### AB
```java
P setAB(long startPos, long endPos);
P setABLoop(int loopMode, int loopInterval);
P setAB(long startPos, long endPos, int loopMode, int loopInterval);
P setClearAB(boolean autoClear);
///////////////////////////////////////////////////////////
player.setAB(abStart, abEnd, abLoop, abLoopInterval).play();
```
#### PlaybackSpeed
```java
boolean setPlaybackSpeed(float speed);
float getPlaybackSpeed();
```
#### SeekTo
```java
boolean seekTo(long ms);
boolean seekTo(long ms, int processingLevel);
void seekToPending(long ms);
long seekToProgress(int progress, int progressMax);
boolean fastForwardRewind(long ms);
```
#### PositionUnit
```java
P setPositionUnitList(IPositionUnitList posUnitList);
int getCurrentPositionUnitIndex();
void setCurrentPositionUnitIndex(int posUnitIndex);
long seekToPositionUnitIndex(int posUnitIndex);
int calibrateCurrentPositionUnitIndex(long position);
P setEnabledPositionUnitLoop(boolean enabled, int loopMode, int loopInterval);
P setPositionUnitLoopIndexList(ArrayList<Integer> posUnitLoopIndexList);
```
### [API - IMediaPlayer](https://github.com/jcodeing/KMedia-Core/blob/release/src/main/java/com/jcodeing/kmedia/IMediaPlayer.java)
å¦‚æœä½ æƒ³æ‰©å±•åª’ä½“å¼•æ“, å¯ä»¥å»å®ç°IMediaPlayeræ¥å£.

#### Source
```java
void setDataSource(String path);
void setDataSource(Context context, Uri uri);
void setDataSource(Context context, Uri uri, Map<String, String> headers);
void setDataSource(FileDescriptor fd);
Uri getDataSource();
void prepareAsync();
```

#### Control
```java
boolean start();
boolean pause();
boolean seekTo(long ms);
void stop();
```

#### Control
```java
void setAudioStreamType(int streamtype);
void setVolume(float leftVolume, float rightVolume);
void setDisplay(SurfaceHolder sh);
void setSurface(Surface surface);
void setScreenOnWhilePlaying(boolean screenOn);
void setLooping(boolean looping);
boolean isLooping();
int getVideoWidth();
int getVideoHeight();
int getAudioSessionId();
```

### [Public - KID](https://github.com/jcodeing/KMedia-Core/blob/release/src/main/res/values/ids.xml)
```xml
<!--========================================================-->
<!--=========@Use prefix "k_" to avoid duplication@=========-->
<!--========================================================-->

<!--=========@Player@=========-->
<item name="k_player_view" type="id"/>
<item name="k_content_frame" type="id"/>
<item name="k_shutter" type="id"/>

<!--=========@Control@=========-->
<item name="k_ctrl_group" type="id"/>
<item name="k_ctrl_layer_port" type="id"/>
<item name="k_ctrl_layer_land" type="id"/>
<!--=========@Layer Part-->
<item name="k_ctrl_layer_part_top" type="id"/>
<item name="k_ctrl_layer_part_bottom" type="id"/>
<item name="k_ctrl_layer_part_left" type="id"/>
<item name="k_ctrl_layer_part_right" type="id"/>
<item name="k_ctrl_layer_part_middle" type="id"/>
<item name="k_ctrl_layer_part_buffer" type="id"/>
<item name="k_ctrl_layer_part_tips_tv" type="id"/>
<!--=========@Smart View-->
<item name="k_play" type="id"/>
<item name="k_pause" type="id"/>
<item name="k_prev" type="id"/>
<item name="k_next" type="id"/>
<item name="k_rew" type="id"/>
<item name="k_ffwd" type="id"/>
<item name="k_position_tv" type="id"/>
<item name="k_duration_tv" type="id"/>
<item name="k_progress_bar" type="id"/>
<item name="k_progress_any" type="id"/>
<!--=========@Extend-->
<item name="k_switch_control_layer" type="id"/>

<!--=========@Floating@=========-->
<item name="k_floating_view_close" type="id"/>
<item name="k_floating_view_drag_location" type="id"/>
<item name="k_floating_view_drag_size" type="id"/>

<!--=========@....................................@=========-->
```

### [Public - Attrs](https://github.com/jcodeing/KMedia-Core/blob/release/src/main/res/values/attrs.xml)
```xml
<!--=========@AControlGroupView@=========-->
<attr format="boolean" name="use_gesture_detector"/>
<declare-styleable name="AControlGroupView">
  <attr format="integer" name="show_timeout"/>
  <attr format="integer" name="rewind_increment"/>
  <attr format="integer" name="fast_forward_increment"/>
  <attr format="reference" name="default_control_layer_id"/>
  <attr name="use_gesture_detector"/>
</declare-styleable>

<!--=========@AControlLayerView@=========-->
<declare-styleable name="AControlLayerView">
  <attr format="reference" name="control_layer_layout_id"/>
  <!--=========@Part-->
  <!--=====@Interaction Area-->
  <attr format="boolean" name="interaction_area_always_visible"/>
  <attr format="boolean" name="use_part_top"/>
  <attr format="boolean" name="use_part_bottom"/>
  <attr format="boolean" name="use_part_left"/>
  <attr format="boolean" name="use_part_right"/>
  <attr format="boolean" name="use_part_middle"/>
  <attr format="boolean" name="use_part_view_animation"/>
  <attr format="dimension" name="part_top_min_height"/>
  <attr format="dimension" name="part_bottom_min_height"/>
  <!--=====@Other-->
  <attr format="boolean" name="use_part_buffer"/>
  <attr format="boolean" name="use_part_tips"/>
</declare-styleable>

<!--=========@AspectRatioView@=========-->
<!--Must be kept in sync with AspectRatioView-->
<attr format="enum" name="resize_mode">
  <enum name="fit" value="0"/>
  <enum name="fixed_width" value="1"/>
  <enum name="fixed_height" value="2"/>
  <enum name="fill" value="3"/>
</attr>
<declare-styleable name="AspectRatioView">
  <attr name="resize_mode"/>
</declare-styleable>

<!--=========@APlayerView@=========-->
<!--Must be kept in sync with APlayerView-->
<attr format="enum" name="surface_type">
  <enum name="none" value="0"/>
  <enum name="surface_view" value="1"/>
  <enum name="texture_view" value="2"/>
</attr>
<declare-styleable name="APlayerView">
  <attr name="surface_type"/>
  <attr format="reference" name="player_layout_id"/>
  <attr format="boolean" name="use_control_group"/>
  <!--Other-->
  <attr name="resize_mode"/>
  <attr name="android:layout_height"/>
  <attr name="use_gesture_detector"/>
</declare-styleable>

<!--=========@.................@=========-->
```

## æ³¨æ„
### Vectorä½ç‰ˆæœ¬å…¼å®¹
KMediaå„ä¸ªModuleä¸­å‡ä½¿ç”¨æ”¯æŒåº“, æ¥å®ç°Android2.1(API 7)åŠæ›´é«˜ç‰ˆæœ¬ä¸­æ”¯æŒVectorDrawable
```gradle
vectorDrawables.useSupportLibrary = true
```
å€¼å¾—æ³¨æ„çš„æ˜¯, å¦‚æœä½ çš„åº”ç”¨éœ€è¦è¿è¡Œåœ¨ä½äºAndroid 5.0(API 21)çš„è®¾å¤‡ä¸Š,  
å¹¶ä½¿ç”¨KMediaä¸­ANotifierçš„createSimpleMediaNotificationBuilderæ—¶,  
ä½ å°±è¦è€ƒè™‘å»å…¼å®¹ä¸‹ä½ç‰ˆæœ¬ä¸­Vectorç”¨åœ¨Notificationä¸Šçš„æƒ…å†µ.  
å¯ä»¥å°†KMediaä¸­ç”¨äºNotificationçš„Vectorè½¬æˆpng, æ”¾åˆ°[Resä¸­.](/demo/src/main/res) æ›´å¤š[å‚è§.](https://developer.android.com/studio/write/vector-asset-studio.html?hl=zh-cn)

### RequiresPermissionæƒé™ç”³è¯·
KMediaå„ä¸ªModuleä¸­ä¸ä¼šå»ä¸»åŠ¨ç”³è¯·ä»»ä½•ç›¸å…³æƒé™,  
å¯¹äºéƒ¨åˆ†éœ€è¦æƒé™çš„API, ä¼šåŠ ä¸Šæ³¨è§£ `RequiresPermission` æ¥æé†’å¼€å‘è€…å»ç”³è¯·æƒé™.  
å€¼å¾—æ³¨æ„çš„æ˜¯, åœ¨æ˜¾ç¤ºæµ®çª—ç›¸å…³çš„APIå¤„, å¦‚æœéœ€è¦åšå…¼å®¹å¤„ç†æ—¶, éœ€è¦ä½¿ç”¨åˆ°WINDOWæƒé™.  
æ­¤å¤„å¹¶æœªåŠ æƒé™æ³¨è§£, ä½†åœ¨æºç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, ä¸Šæ–‡ä¸­ä¹Ÿæåˆ°äº†è¿™ç‚¹.  
å› ä¸ºä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½éœ€è¦å»åšå…¼å®¹æµ®çª—. è¿™ä¸ªå°±è¦æ ¹æ®ä½ çš„å…·ä½“ä½¿ç”¨éœ€æ±‚åˆç†ç”³è¯·WINDOWæƒé™.  
è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„å®šåˆ¶ç³»ç»Ÿ, éœ€è¦æ‰‹åŠ¨å¤„ç† `æ˜¾ç¤ºæ‚¬æµ®çª—`.

## å¼€å‘
å¾ˆé«˜å…´åŒå¤§å®¶ä¸€èµ·æ¥å¼€å‘KMedia. åšå¼€æºè´¡çŒ®è€…çš„ä¸€å¤¸å…‹.

### é¦–å…ˆæˆ‘ä»¬åšä¸‹å¼€å‘å‡†å¤‡å·¥ä½œ

#### Step 1: å…‹éš†KMediaä»“åº“çš„å¼€å‘åˆ†æ”¯åˆ°æœ¬åœ°
```sh
git clone -b develop https://github.com/jcodeing/KMedia.git
```
#### Step 2: åˆå§‹åŒ–KMediaå„ä¸ªæ¨¡å—
ä¹Ÿå¯ä»¥ä½¿ç”¨ `git submodule` å‘½ä»¤(init & update)æ¥å®Œæˆ
```sh
./init_modules.sh
```
#### Step 3: æ·»åŠ å±äºä½ çš„è¿œç¨‹ä»“åº“åœ°å€
è¿œç¨‹ä»“åº“åœ°å€, å¯ä»¥é€šè¿‡Forkæˆ‘çš„å„ä¸ªæ¨¡å—å¾—åˆ°.
```sh
git remote add fork "Your KMedia Remote Repositorie Path"
cd core
git remote add fork "Your KMedia-Core Remote Repositorie Path"
cd uie
git remote add fork "Your KMedia-Uie Remote Repositorie Path"
cd mpe
git remote add fork "Your KMedia-Mpe Remote Repositorie Path"
```
#### å®Œæˆä¸Šé¢çš„æ­¥éª¤åç”¨IDE(AndroidStudio)æ‰“å¼€KMedia

### å…¶æ¬¡æˆ‘ä»¬æ¥äº†è§£ä¸‹å¼€å‘è§„èŒƒ

#### Code Style

##### KMedia ä»£ç ç»Ÿä¸€ä½¿ç”¨ [Google Style](https://github.com/google/styleguide/blob/gh-pages/intellij-java-google-style.xml) æ¥ Reformat Code
ç”±äºKMediaä¸ºå¼€æºé¡¹ç›®, å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæ¶‰åŠåˆ°å¤šç§Reformat Codeé£æ ¼,  
ä¸ºäº†ä¾¿äºå¤§å®¶é˜…è¯»å’Œç¼–ç , æ‰€ä»¥åœ¨æ­¤ç»Ÿä¸€ä½¿ç”¨Google Styleæ¥Reformat Code.

##### ä»£ç ä¸­ä½¿ç”¨ä»¥ä¸‹æ³¨é‡Šæ¡æ¥åˆ’åˆ†å…·ä½“çš„åŠŸèƒ½æ¨¡å—
ä½ å¯ä»¥å°†ä¸‹é¢çš„æ³¨é‡Šæ¡, åŠ å…¥åˆ°IDEçš„Live Templatesä¸­, ä»è€Œæ–¹ä¾¿ä½¿ç”¨.
```java
// ============================@Xxx Xxx@============================
// ============================@Xxx
// =========@Xxx Xxx@=========
// =========@Xxx
```
### æœ€åæˆ‘ä»¬å…·ä½“è°ˆä¸‹ä»æ— åˆ°æœ‰çš„ç¼–ç è´¡çŒ®æµç¨‹.
#### é¦–å…ˆ, ä½ è¦æœ‰ä¸€ä¸ªéœ€æ±‚
* ä¼˜åŒ–KMedia.
* è§£å†³KMediaçš„Bug,ä¿®å¤å®ƒ.
* ä¸€æ‹è„‘é—¨å¾—åˆ°ä¸€ä¸ªIdea, æƒ³åŠ åˆ°KMediaä¸­, è®©å¤§å®¶ä¸€èµ·ç”¨.
* ç­‰ç­‰...

#### ç„¶å, ä½ å°±å¯ä»¥ç‹‚ç”©ä»£ç äº†
ç”©ç è¿‡ç¨‹ä¸­, è¯·éµå¾ªKMediaçš„ç¼–ç è§„èŒƒ.

#### å…¶æ¬¡, æ³¨æ„ä¸‹, åœ¨ç¼–ç å®Œæˆéƒ¨åˆ†åå…ˆæäº¤åˆ°è‡ªå·±(Fork)çš„è¿œç¨‹ä»“åº“
åœ¨å‡†å¤‡å·¥ä½œä¸­, æˆ‘ä»¬å„è‡ªéƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„è¿œç¨‹ä»“åº“.  
å½“ä»£ç è¿˜æ˜¯é›å½¢æ—¶, å…ˆæäº¤åˆ°è‡ªå·±çš„ä»“åº“è¿›è¡Œç»´æŠ¤.
åŒæ—¶, å¯ä»¥éšæ—¶åˆå¹¶Originä»“åº“çš„æœ€æ–°ä»£ç .

#### æœ€å, å½“ä½ å®Œæˆè¿™ä¸ªéœ€æ±‚æˆ–è€…ç¡®å®šè¦å…ˆæäº¤åˆ°Originä»“åº“æ—¶
å¯ä»¥åˆ°ä½ Forkçš„Githubä»“åº“ä¸»é¡µ, ç‚¹å‡» `Pull request` å» Create pull request ç»™æˆ‘.  
æˆ‘çœ‹åˆ°å, ä¼šç¬¬ä¸€æ—¶é—´å¤„ç†ä½ çš„ request. ä»è€Œæ—¶KMediaæ›´åŠ å®Œå–„å’Œå¼ºå›º.

### ===========================æ„Ÿè°¢ä½ ä½¿ç”¨KMedia===========================
